# 배열

> **배열은 값 또는 변수 앨리먼트의 집합으로 구성된 구조**로, 하나 이상의 인덱스 또는 키로 식별된다.

자료구조는 크게 **메모리 공간 기반의 연속 방식**과 **포인터 기반의 연결 방식**으로 나뉜다. **배열은 연속 방식의 가장 기본이 되는 자료형**이다. 참고로 연결 방식의 가장 기본이 되는 자료형은 연결 리스트이다.<br>C 언어를 기준으로, 배열은 크기를 지정하고 해당 크기만큼의 연속된 메모리 공간을 할당받는 작업을 수행하는 자료형을 말한다. **크기가 고정되어 있으며 한번 생성한 배열은 크기를 변경하는 것이 불가능**하다.
```commandline
// C
int arr[5] = {4, 7, 29, 0, 1};
```
해당 배열은 정수형 `int`로 선언한 코드이다. `int`의 사이즈는 컴파일러와 프로세서의 구조에 따라 상이하다. 최신 시스템과 컴파일러를 기준으로 `int`의 사이즈는 4바이트이다. 메모리에 대한 접근은 바이트 단위로 하기 때문에 가리키는 주소는 1바이트마다 1씩 증가한다.<br>**배열은 어느 위치에나 O(1)에 조회가 가능**하다. 예를 들어 위의 배열에서 4번째 값에 접근하고 싶다면 `int` 배열이므로 각각 4바이트의 사이즈를 갖고 있기 때문에, 12 (= 3 * 4 byte)만큼 주소를 증가하면 된다. 배열이 크더라도 **즉시 주소를 계산**할 수 있으며 **언제든 해당 메모리 주소에 있는 값을 O(1)에 조회가 가능**하다.

배열은 고정된 크기만큼의 연속된 메모리 할당이다. 그러나 **실제 데이터에서는 전체 크기를 가늠하기 힘들 때가 많다.** 이러한 문제를 해결하기 위해 **크기를 지정하지 않고 자동으로 리사이징하는 배열인 동적 배열이 등장**하였다.<br>대부분의 프로그래밍 언어는 동적 배열을 지원하며, 자바에서는 `ArrayList`, C++에서는 `std::vector`가 존재한다. 파이썬에서는 리스트가 대표적이다. 참고로 파이썬에서는 정적 배열을 따로 제공하지 않으며, 동적 배열인 리스트만 제공한다.

동적 배열의 원리는 다음과 같다. 미리 초깃값을 작게 잡아 배열을 생성하고, **데이터가 추가되면서 꽉 채워지면 늘려주고 모두 복사**하는 식이다. 대개는 더블링이라 하여 2배씩 늘려준다. 파이썬의 더블링 구조는 다음과 같다.
```commandline
// cpython/Objects/listobject.c
// The growth pattern is: 0, 4, 8, 16, 25, 35, 46, 58, 72, 88, ...
new_allocated = (size_t)newsize + (newsize >> 3) + (newsize < 9 ? 3 : 6);
```
파이썬의 그로스 팩터 (Growth Factor)는 초반에는 2배씩 늘려 가지만, 전체적으로는 약 1.125배로 구현되어 있다. **동적 배열은 크기를 지정할 필요가 없어 매우 편리하게 활용할 수 있으며, 조회 또한 O(1)에 가능**하다. 그러나 더블링이 필요한 만큼 공간이 차게되면, 새로운 메모리 공간에 더 큰 크기의 배열을 할당하고 기존 데이터를 복사하는 작업이 필요하므로 O(n) 비용이 발생한다. 이러한 일은 자주 일어나지 않기 때문에 분할 상환 분석에 따른 입력 시간은 여전히 O(1)이다.