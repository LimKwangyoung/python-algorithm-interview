## 해시
> **해시 함수란 임의 크기 데이터를 고정 크기 값으로 매핑하는 데 사용할 수 있는 함수**를 말한다.

**해시 테이블의 핵심은 해시 함수**다. **해시 테이블을 인덱싱하기 위해 해시 함수를 사용하는 것을 해싱**이라 하며, 해싱은 정보를 가능한 한 **빠르게 저장하고 검색**하기 위해 사용하는 중요한 기법 중 하나다.<br>성능 좋은 해시 함수들의 특징은 다음과 같다.
- 해시 함수 값 충돌의 최소화
- 쉽고 빠른 연산
- 해시 테이블 전체에 해시 값이 균일하게 분포
- 사용할 키의 모든 정보를 이용하여 해싱
- 해시 테이블 사용 효율이 높을 것

### 생일 문제
그렇다면 충돌은 얼마나 많이 발생할까? **생각보다 충돌은 쉽게 일어난다.** 흔한 예로 생일 문제를 들 수 있다. 여러 사람이 모였을 때 생일이 같은 2명이 존재할 확률을 구해보자. 23명이 모이면 50%를 넘고, 57명이 모이면 99%를 넘어선다. 우리의 일반적인 상식에 반하는 내용이지만, 다음과 같이 코드를 작성해서 실험해보자.
```commandline
import random

TRIALS = 100000     # 10만 번 실험
same_birthdays = 0  # 생일이 같은 실험의 수

# 10만 번 실험 진행
for _ in range(TRIALS):
    birthdays = []
    # 23명이 모였을 때, 생일이 같을 경우 same_birthdays += 1
    for i in range(23):
        birthday = random.randint(1, 365)
        if birthday in birthdays:
            same_birthdays += 1
            break
        birthdays.append(birthday)

# 전체 10만 번 실험 중 생일이 같은 실험의 확률
print(f'{same_birthdays / TRIALS * 100}%')
-------
50.708%
```
이처럼 일반적인 상식(잘못된 상식)과는 달리, **충돌은 생각보다 쉽게 일어나므로 충돌을 최소화하는 일은 무엇보다 중요**하다.

### 비둘기집 원리
> **비둘기집 원리**란, **n개 아이템을 m개 컨테이너에 넣을 때, n>m이라면 적어도 하나의 컨테이너에는 반드시 2개 이상의 아이템이 들어 있다는 원리**를 말한다.

왜 충돌은 일어날 수밖에 없을까? **비둘기집 원리는 충돌의 원리를 잘 설명**한다. 9개의 공간이 있는 곳에 10개의 아이템이 들어온다면 반드시 1번 이상은 충돌이 발생하게 된다.<br>
좋은 해시 함수는 충돌을 최소화하여 단 1번의 충돌만 일어나게 하겠지만, 좋지 않은 해시 함수의 경우 심하면 9번 모두 충돌해서, 9개의 공간 중 1개밖에 사용하지 못할 수도 있다.<br>**여러 번 충돌한다는 것은 그만큼 추가 연산을 필요로 하기 때문에 가급적 충돌을 최소화**하는 것이 좋다.

### 로드 팩터
> **로드 팩터란 해시 테이블에 저장된 데이터 개수(저장된 키의 개수) n을 버킷의 개수 k로 나눈 것**이다.

로드 팩터 비율에 따라서 해시 함수를 재작정해야 될지 또는 해시 테이블의 크기를 조정해야 할지를 결정한다. 또한 이 값은 해시 함수가 키들을 잘 분산해 주는지를 말하는 효율성 측정에도 사용된다. **로드 팩터가 증가할수록 해시 테이블의 성능은 점점 감소**한다.
> 자바 10의 경우 해시맵의 디폴트 로드 팩트는 0.75.

### 해시 함수
해시 함수를 통해 키가 해시 값으로 변경된다. 이처럼 **해시 테이블을 인덱싱하기 위해 해시 함수를 사용하는 것을 해싱**이라고 한다. 가장 단순하면서도 널리 쓰이는 정수형 해싱 기법인 나눗셈 방식을 살펴보자.
> 해싱에는 다양한 알고리즘이 있으며, 최상의 분포를 제공하는 방법은 데이터에 따라 제각각이다.

h(x) = x mod x<br>
h(x)는 입력값 x의 해시 함수를 통해 생성된 결과이다. m은 해시 테이블의 크기로, 일반적으로 2의 멱수에 가깝지 않은 소수를 택하는 것이 좋다. h(x)는 이 값의 모듈로 연산의 결과로, 매우 단순하지만 **실무에서는 이미 많은 키 세트가 충분히 랜덤한 상태고, 키 세트가 어떤 큰 소수에 의해 순환 구조가 될 확률은 낮기 때문에 잘 작동**한다.
> #### 조슈아 블로크
> 조슈아 블로크는 자바를 설계할 때, 값 x를 다음과 같이 정의했다.
> ```commandline
> P(x) = s[0] * x^(n-1) + s[1] * x^(n-2) + ... + s[n-1]
> ```
> 조슈아 블로크는 여러 해시 함수의 성능을 조사하였고 `x`가 `31`인 `P(31)`을 채택하였다. 소수인 31은 성능과 충돌의 적절한 합의점이었으며 실제로 31은 메르센 소수로 수학적으로 나쁘지 않은 선택이다.